@using GSM.Infrastructure.Filters
@using GSM.Utils
@{
    Layout = "~/Views/MaterialRequest/_Layout.cshtml";
}

<div class="container-fluid" ng-app="materialRequestApp" ng-controller="DetailMaterialRequestCtrl as ctrl">
    <div class="row">
        <h3 style="margin-top:0;" ng-bind-template="Material Request {{ctrl.formData.Id}} Details:"></h3>
    </div>
    <div class="row form-horizontal">
        <div class="form-group" ng-cloak>
            <label class="col-md-2 control-label" style="text-align:left;" for="SenseStrand">Request Date:</label>
            <div class="col-md-2">
                <input type="text"
                       name="RequestDate"
                       class="form-control"
                       style="max-width: initial"
                       ng-model="ctrl.formData.RequestDate"
                       ng-disabled="true"
                       close-text="Close" />
            </div>
        </div>
        <div class="form-group" ng-cloak>
            <label class="col-md-2 control-label" style="text-align:left;" for="AntiSenseStrand">Need By Date:</label>
            <div class="col-md-2">
                <input type="text"
                       name="NeedByDate"
                       class="form-control"
                       style="max-width: initial"
                       ng-model="ctrl.formData.NeedByDate"
                       ng-disabled="true"
                       close-text="Close" />
            </div>
        </div>
    </div>
    <div class="row form-horizontal">
        <div class="form-group">
            <label class="col-md-2 control-label" style="text-align:left;" for="SenseStrand">Status:</label>
            <div class="col-md-2">
                <input type="text"
                       name="NeedByDate"
                       class="form-control"
                       ng-model="ctrl.formData.Status.Description"
                       ng-disabled="true" />
            </div>
        </div>
    </div>
    <div class="row form-horizontal">
        <div class="form-group">
            <label class="col-md-2 control-label" style="text-align:left;" for="SenseStrand">Notes:</label>
            <div class="col-md-2">
                <textarea class="form-control"
                          ng-model="ctrl.formData.Notes"
                          readonly="readonly"
                          disabled="disabled"
                          rows="5">
                </textarea>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-5 panel panel-default">
            <label class="label label-default" style="position:relative;top:-10px;left:5px;">Requested Strands</label>
            <div class="row">
                <div class="grid col-md-11"
                     style="height:250px; margin-left: 5px; margin-bottom: 5px; margin-right: 5px; padding-left: 0; padding-right: 0"
                     ui-grid="ctrl.selectedSenseStrands"
                     ui-grid-resize-columns
                     ui-grid-selection>
                </div>
            </div>
        </div>
        <!--<div class="col-md-1">
            <p>Combined With:</p>
        </div>-->
        <div class="col-md-5 col-md-offset-1 panel panel-default">
            <label class="label label-default" style="position:relative;top:-10px;left:5px;">Requested Duplexes</label>
            <div class="row">
                <div class="grid col-md-11"
                     style="height:250px; margin-left: 5px; margin-bottom: 5px; margin-right: 5px; padding-left: 0; padding-right: 0"
                     ui-grid="ctrl.selectedSenseDuplexes"
                     ui-grid-resize-columns
                     ui-grid-selection>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="row"><span class="text-danger field-validation-error col-md-2 col-md-offset-2" ng-bind="ctrl.submitMessage"></span></div>
        <div class="row">
            @*<div class="col-md-2 col-md-offset-3">
                    <div class="btn-group">
                        <input type="button" id="delete" value="Delete" class="btn btn-success btn-danger center-block" ng-click="ctrl.deleteRequest()" ng-disabled="!ctrl.canEdit" />
                    </div>
                </div>*@
            <div class="col-md-2 col-md-offset-5">
                <div class="btn-group">
                    @if (User.HasPermissions(Permission.CreateMaterialRequest) || User.HasPermissions(Permission.UpdateMaterialRequestStatus))
                    {
                        <input type="button" id="edit" value="Edit" class="btn btn-success btn-primary center-block"
                               ng-click="ctrl.editRequest()" ng-disabled="!ctrl.canEdit" />
                    }
                    <input type="button" id="cancel" value="Cancel" class="btn btn-default"
                           ng-click="ctrl.cancelChanges()" />
                </div>
            </div>
        </div>
    </div>
</div>

@section scripts
{
    <script src="~/Scripts/Custom/Utils.js"></script>

    <script src="~/Scripts/Custom/UserSettings.js"></script>
    <script src="~/Scripts/angular-app/AppService.js"></script>
    <script src="~/Scripts/angular-app/materialRequest/services/MaterialRequestService.js"></script>

    <script src="~/Scripts/angular-app/materialRequest/MaterialRequestApp.js"></script>
    <script src="~/Scripts/angular-app/materialRequest/controllers/DetailMaterialRequestCtrl.js"></script>
    <!--<script src="~/Scripts/Custom/material-request/material-request.app.js"></script>-->
}
